# 滚动更新

## 健康检查

livenessProbe 用于检测容器是否存活，检查 8881 端口是否被监听。
readinessProbe 用于检测容器是否就绪，确保服务在更新时不会接收流量直到准备好。

## 滚动更新策略

maxUnavailable: 1 表示更新过程中最多允许 1 个 Pod 不可用。
maxSurge: 1 表示更新过程中最多允许 1 个新创建的 Pod。

## 镜像更新命令： 使用以下命令更新镜像

    kubectl set image deployment/product product=huajuan6848/product:lab2-unhealthy

## 回滚命令： 如果更新失败，可以使用以下命令回滚到上一个版本

    kubectl rollout undo deployment/product
